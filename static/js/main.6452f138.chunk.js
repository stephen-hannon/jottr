(this.webpackJsonpjottr=this.webpackJsonpjottr||[]).push([[0],{20:function(e,n,t){e.exports=t(27)},27:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(12),c=t.n(o),u=t(1),i=t(6),l=t(3),s=t(19),m=t(18),f=t(4);function d(e,n,t){var a=Object(r.useState)((function(){return e.getItem(n,t)})),o=Object(l.a)(a,2),c=o[0],u=o[1];return Object(r.useEffect)((function(){e.setItem(n,c)}),[e,n,c]),[c,u]}var b=t(13),p=t(14),v=function(){function e(n){Object(b.a)(this,e),this.namespace=void 0,this.storage=void 0,this.namespace=n,this.storage=window.localStorage}return Object(p.a)(e,[{key:"getNamespacedKey",value:function(e){return this.namespace?"".concat(this.namespace,"_").concat(e):e.toString()}},{key:"removeNamespace",value:function(e){return this.namespace&&e.startsWith("".concat(this.namespace,"_"))?e.replace("".concat(this.namespace,"_"),""):e}},{key:"getItem",value:function(e,n){var t=this.storage.getItem(this.getNamespacedKey(e));return null===t&&void 0!==n?n:JSON.parse(t)}},{key:"removeItem",value:function(e){this.storage.removeItem(this.getNamespacedKey(e))}},{key:"setItem",value:function(e,n){var t=JSON.stringify(n);this.storage.setItem(this.getNamespacedKey(e),t)}}]),e}(),h=t(2);function g(){var e=Object(h.a)(["\n  flex: 1;\n"]);return g=function(){return e},e}function y(){var e=Object(h.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n"]);return y=function(){return e},e}var O=Object(u.c)(y()),j=Object(u.c)(g());function k(){var e=Object(h.a)(["\n  font-family: 'Source Code Pro', Consolas, Monaco, monospace;\n  display: block;\n  width: 100%;\n  margin-top: 1.5rem;\n\n  &:not(:focus) {\n    height: ","px !important;\n  }\n"]);return k=function(){return e},e}function E(){var e=Object(h.a)(["\n  display: block;\n  width: 100%;\n  border: none;\n  font-weight: bold;\n  font-size: 2rem;\n  border-bottom: 2px solid transparent;\n  transition: border-bottom-color linear ","s;\n\n  &:hover {\n    border-bottom-color: ",";\n  }\n\n  &:focus {\n    outline: none;\n    border-bottom-color: ",";\n  }\n"]);return E=function(){return e},e}function w(){var e=Object(h.a)(["\n  ","\n"]);return w=function(){return e},e}function x(){var e=Object(h.a)(["\n  border-radius: 10px;\n  box-shadow: 0 0 6px 0 #00000080;\n  margin: 4rem auto;\n  padding: 2rem;\n  max-width: 1000px;\n"]);return x=function(){return e},e}var S=u.d.div(x()),N=u.d.div(w(),O),I=u.d.input(E(),(function(e){return e.theme.duration}),(function(e){return e.theme.colors.gray}),(function(e){return e.theme.colors.primary})),V=u.d.textarea(k(),150),C=function(e){var n=e.data,t=e.deleteDisabled,o=e.moveUpDisabled,c=e.moveDownDisabled,u=e.onDelete,i=e.onMove,s=e.onChange,m=Object(r.useRef)(null),f=Object(r.useState)(150),d=Object(l.a)(f,2),b=d[0],p=d[1];return Object(r.useEffect)((function(){m.current&&(console.log(m.current.scrollHeight),p(Math.max(m.current.scrollHeight,150)))}),[n.text]),a.a.createElement(S,null,a.a.createElement(N,null,a.a.createElement(I,{value:n.title,onChange:function(e){var n=e.target;return s("title",n.value)},placeholder:"Title"}),a.a.createElement("button",{disabled:o,onClick:function(){return i(-1)}},"\u2191"),a.a.createElement("button",{disabled:c,onClick:function(){return i(1)}},"\u2193"),a.a.createElement("button",{disabled:t,onClick:u},"delete")),a.a.createElement(V,{ref:m,style:{height:b},value:n.text,placeholder:"Start typing...",onChange:function(e){var n=e.target;return s("text",n.value)}}))},D={title:"",text:""},J=new v("jottr");function _(e,n){switch(n.type){case"change":var t=Object(f.a)(Object(f.a)(Object(f.a)({},D),e[n.key]),{},{[n.parameter]:n.value});return J.setItem(n.key,t),Object(f.a)(Object(f.a)({},e),{},{[n.key]:t});case"change_sync":return Object(f.a)(Object(f.a)({},e),{},{[n.key]:n.newValue});case"delete":J.removeItem(n.key);case"delete_sync":var r=n.key;e[r];return Object(s.a)(e,[r].map(m.a))}}function K(e){console.log("gis",e);var n={};return e.forEach((function(e){n[e]=J.getItem(e)})),n}function M(){var e=d(J,"keys",[]),n=Object(l.a)(e,2),t=n[0],o=n[1],c=d(J,"nextKey",0),u=Object(l.a)(c,2),s=u[0],m=u[1],f=Object(r.useReducer)(_,t,K),b=Object(l.a)(f,2),p=b[0],v=b[1];Object(r.useEffect)((function(){J.setItem("version",1)}),[]);var h=Object(r.useCallback)((function(e){if(e.newValue!==e.oldValue&&null!=e.key){var n=J.removeNamespace(e.key),t=Number(n);"keys"===n&&e.newValue?o(JSON.parse(e.newValue)):"nextKey"===n&&e.newValue?m(JSON.parse(e.newValue)):isNaN(t)||(null===e.newValue?v({type:"delete_sync",key:t}):(null===e.oldValue&&m(s+1),v({type:"change_sync",key:t,newValue:JSON.parse(e.newValue)})))}}),[o,m,s]);Object(r.useEffect)((function(){return window.addEventListener("storage",h),function(){window.removeEventListener("storage",h)}}),[h]);var g=function(e){return function(n){o(function(e,n,t){if(t<0||t>=e.length)return e;var r=Object(i.a)(e),a=r.splice(n,1)[0];return r.splice(t,0,a),r}(t,e,e+n))}};return a.a.createElement(a.a.Fragment,null,[s].concat(Object(i.a)(t)).map((function(e,n){return a.a.createElement(C,{key:e,data:p[e]||D,moveUpDisabled:n<=1,moveDownDisabled:0===n||n===t.length,deleteDisabled:0===n,onMove:g(n-1),onChange:function(r,a){0===n&&(o([s].concat(Object(i.a)(t))),m(s+1)),v({type:"change",key:e,value:a,parameter:r})},onDelete:function(){o(t.filter((function(n){return n!==e}))),v({type:"delete",key:e})}})})))}function z(){var e=Object(h.a)(["\n  display: inline-block;\n"]);return z=function(){return e},e}function L(){var e=Object(h.a)(["\n  list-style: none;\n  padding: 0;\n  margin: 0;\n"]);return L=function(){return e},e}function F(){var e=Object(h.a)(["\n  ","\n  margin: 0;\n"]);return F=function(){return e},e}function H(){var e=Object(h.a)(["\n  ","\n  color: ",";\n  padding: 1.5rem 3rem;\n"]);return H=function(){return e},e}var P=u.d.div(H(),O,(function(e){return e.theme.colors.primary})),R=u.d.h1(F(),j),U=u.d.ul(L()),B=u.d.li(z()),T=function(){return a.a.createElement(P,null,a.a.createElement(R,null,"Jottr"),a.a.createElement(U,{role:"navigation"},a.a.createElement(B,null,a.a.createElement("a",{href:"https://github.com/stephen-hannon/jottr"},"Source code"))))},W={colors:{gray:"#e0e0e0",primary:"#ab47bc",primaryLight:"#df78ef",text:"#000"},duration:.1};function q(){var e=Object(h.a)(["\n* {\n  box-sizing: border-box;\n}\n\nhtml {\n  /* Make 1rem == 10px on typical browsers */\n  font-size: ","%;\n  font-family: 'Source Sans Pro', sans-serif;\n}\n\nbody {\n  font-size: 1.6rem;\n  margin: 0;\n}\n\ninput,\nbutton {\n  font-family: inherit;\n}\n"]);return q=function(){return e},e}var A=Object(u.b)(q(),62.5);function G(){return a.a.createElement(u.a,{theme:W},a.a.createElement(a.a.Fragment,null,a.a.createElement(A,null),a.a.createElement(T,null),a.a.createElement(M,null)))}var Q=document.getElementById("root");c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(G,null)),Q)}},[[20,1,2]]]);
//# sourceMappingURL=main.6452f138.chunk.js.map